(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{133:function(e,t,n){e.exports={mySort:"MySort_mySort__Vqm3W",sort__btn:"MySort_sort__btn__3wecl"}},188:function(e,t,n){},28:function(e,t,n){e.exports={login_form:"AuthPageStyleSheets_login_form__2dJxW",title:"AuthPageStyleSheets_title__6h226",main_form:"AuthPageStyleSheets_main_form__cD3hM",form:"AuthPageStyleSheets_form__2JqqJ",form_title__email:"AuthPageStyleSheets_form_title__email__37ri4",form_title__password:"AuthPageStyleSheets_form_title__password__3fG4O",login_btn:"AuthPageStyleSheets_login_btn__bbn_9"}},351:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(23),c=n.n(a),s=n(29),o=(n(188),n(180)),i=n(52),l=n(25),u=n.n(l),j=n(44),d=n(130),h=n.n(d),b=h.a.create({baseURL:"https://todo-rastorguev.herokuapp.com"}),f=h.a.create({baseURL:"https://todo-rastorguev.herokuapp.com"});f.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("token")),e}));var p=n(179),m=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var r,a,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.prev=1,e.next=4,b.post("/user/registration",{email:t,password:n});case 4:if(a=e.sent,(c=a.data).token){e.next=8;break}return e.abrupt("return");case 8:localStorage.setItem("token",c.token),r&&r(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t&&p.b.error("Email already exists");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var r,a,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.prev=1,e.next=4,b.post("/user/login",{email:t,password:n});case 4:if(a=e.sent,(c=a.data).token){e.next=8;break}return e.abrupt("return");case 8:localStorage.setItem("token",c.token),r&&r(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),p.b.error("Incorrect login or password");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),x=n(6);function g(e){var t=e.isAuth,n=e.setIsAuth;return Object(x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(x.jsx)("div",{children:Object(x.jsx)(i.b,{style:{fontSize:60,fontWeight:100,color:"white"},to:"/",children:"Todo"})}),Object(x.jsx)("div",{children:t?Object(x.jsx)(i.b,{to:"/",children:Object(x.jsx)(o.a,{onClick:function(){!function(e){localStorage.removeItem("token"),e(!1)}(n)},value:"small",type:"primary",children:"Logout"})}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(i.b,{to:"/login",children:Object(x.jsx)(o.a,{style:{marginRight:10},value:"small",type:"ghost",children:"Sign In"})}),Object(x.jsx)(i.b,{to:"/registration",children:Object(x.jsx)(o.a,{value:"small",type:"primary",children:"Sign Up"})})]})})]})}var v=n(359),y=n(22),_=n(60),S=function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(v.a,Object(_.a)(Object(_.a)({style:{borderRadius:10,height:35}},e),{},{placeholder:"Buy milk..."}))})},k=n(28),w=n.n(k);function A(e){var t=e.setIsAuth,n=e.isAuth,a=Object(r.useState)(),c=Object(s.a)(a,2),i=c[0],l=c[1],u=Object(r.useState)(),j=Object(s.a)(u,2),d=j[0],h=j[1];return n?Object(x.jsx)(y.a,{to:"/"}):Object(x.jsxs)("div",{className:w.a.login_form,children:[Object(x.jsx)("p",{className:w.a.title,children:"Welcome back!"}),Object(x.jsxs)("div",{className:w.a.main_form,children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:w.a.form,children:[Object(x.jsx)("p",{className:w.a.form_title__email,children:"email:"}),Object(x.jsx)(v.a,{onChange:function(e){return l(e.target.value)},value:i,style:{marginBottom:15,marginLeft:32},type:"email",placeholder:"ex: index@mail.com"})]}),Object(x.jsxs)("div",{className:w.a.form,children:[Object(x.jsx)("p",{className:w.a.form_title__password,children:"password:"}),Object(x.jsx)(v.a,{onChange:function(e){return h(e.target.value)},value:d,type:"password",placeholder:"ex: steveJobs123"})]})]}),Object(x.jsx)(o.a,{onClick:function(){O(i,d,t)},className:w.a.login_btn,type:"ghost",children:"Login!"})]})]})}function N(e){var t=e.setIsAuth,n=Object(r.useState)(),a=Object(s.a)(n,2),c=a[0],i=a[1],l=Object(r.useState)(),d=Object(s.a)(l,2),h=d[0],b=d[1],f=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(c,h,t);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:w.a.login_form,children:[Object(x.jsx)("p",{className:w.a.title,children:"Create account"}),Object(x.jsxs)("div",{className:w.a.main_form,children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:w.a.form,children:[Object(x.jsx)("p",{className:w.a.form_title__email,children:"email:"}),Object(x.jsx)(v.a,{onChange:function(e){return i(e.target.value)},value:c,style:{marginBottom:15,marginLeft:32},type:"email",placeholder:"ex: index@mail.com"})]}),Object(x.jsxs)("div",{className:w.a.form,children:[Object(x.jsx)("p",{className:w.a.form_title__password,children:"password:"}),Object(x.jsx)(v.a,{onChange:function(e){return b(e.target.value)},value:h,type:"password",placeholder:"ex: steveJobs123"})]})]}),Object(x.jsx)(o.a,{onClick:f,className:w.a.login_btn,type:"primary",children:"Register!"})]})]})}var T=n(360),I=n(356),C=n(357),z=n(358),D=n(111),P=n(127),R=n.n(P),B=n(361),J=function(e){var t=e.todo,n=e.removeTodo,a=e.patchTodo,c=Object(r.useState)(!1),i=Object(s.a)(c,2),l=i[0],u=i[1],j=Object(r.useState)(!0),d=Object(s.a)(j,2),h=d[0],b=d[1];return Object(x.jsx)(T.b.Item,{style:{borderBottom:"1px solid #f0f0f042"},children:Object(x.jsxs)(I.a,{justify:"space-between",style:{width:"100%",alignItems:"center",color:"#fff"},children:[Object(x.jsx)(C.a,{style:{cursor:"pointer"},children:Object(x.jsxs)(I.a,{onClick:function(e){e.stopPropagation(),u(!0)},align:"middle",children:[Object(x.jsx)(R.a,{checked:!!t.done,onClick:function(e){e.stopPropagation(),a(t.id,{done:!t.done})},style:{marginRight:10}}),Object(x.jsx)(z.a,{style:{color:"#fff",fontSize:15},children:l?Object(x.jsx)(v.a,{size:"small",autoFocus:!0,onBlur:function(){return u(!1)},onKeyDown:function(e){"Enter"===e.code&&(a(t.id,{title:e.target.value}),u(!1))},defaultValue:t.title}):t.title})]})}),Object(x.jsxs)(C.a,{children:[t.createdAt.slice(11,19),Object(x.jsx)(D.a,{placement:"right",title:"Delete",children:Object(x.jsx)(o.a,{disabled:!h,onClick:function(e){e.stopPropagation(),b(!1),n(t.id)},style:{marginLeft:65,marginRight:18},shape:"circle",size:"small",icon:Object(x.jsx)(B.a,{})})})]})]})})},L=function(e){var t=e.todos,n=e.removeTodo,r=e.selectToDo,a=e.patchTodo;return Object(x.jsx)(T.b,{style:{marginTop:35},size:"large",dataSource:t,renderItem:function(e){return Object(x.jsx)(J,{patchTodo:a,todos:t,todo:e,selectToDo:r,removeTodo:n},e.id)}})},E=n(133),F=n.n(E),q=function(e){var t=e.setFilter,n=function(e){return function(){t((function(t){return Object(_.a)(Object(_.a)({},t),{},{filterType:e})}))}},r=function(e){return function(){t((function(t){return Object(_.a)(Object(_.a)({},t),{},{sortDirection:e})}))}};return Object(x.jsxs)("div",{className:F.a.mySort,children:[Object(x.jsxs)("div",{children:[Object(x.jsx)(o.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:n(""),children:"All"}),Object(x.jsx)(o.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:n("done"),children:"Done"}),Object(x.jsx)(o.a,{size:"small",style:{color:"#fff"},type:"ghost",shape:"round",onClick:n("undone"),children:"In process"})]}),Object(x.jsxs)("div",{className:F.a.sort__btn,children:[Object(x.jsx)("p",{style:{marginRight:23,marginBottom:0,color:"#fff"},children:"Sort by date"}),Object(x.jsx)(o.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:r("asc"),children:Object(x.jsx)("i",{className:"fas fa-chevron-up"})}),Object(x.jsx)(o.a,{size:"small",style:{color:"#fff"},type:"ghost",shape:"round",onClick:r("desc"),children:Object(x.jsx)("i",{className:"fas fa-chevron-down"})})]})]})},W=function(e){var t=e.createTodo,n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(x.jsx)("div",{children:Object(x.jsx)("form",{style:{alignItems:"center",paddingTop:5,paddingBottom:10},children:Object(x.jsx)(S,{onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),""===c.trim()?p.b.error("Form is empty"):(t(c),o("")))},onChange:function(e){return o(e.target.value)},value:c,type:"text"})})})},M=n(176);function U(e){var t=e.isAuth,n=Object(r.useState)([]),a=Object(s.a)(n,2),c=a[0],o=a[1],i=Object(r.useState)(1),l=Object(s.a)(i,2),d=l[0],h=l[1],b=Object(r.useState)({sortDirection:"asc",filterType:"all"}),m=Object(s.a)(b,2),O=m[0],g=m[1],v=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={order:O.sortDirection},"done"!==O.filterType&&"undone"!==O.filterType||(t.filterBy=O.filterType),e.next=5,f.get("/todos",{params:t});case 5:n=e.sent,o(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o([]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.post("/todo",{title:t,done:!1});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),p.b.error("You need to sign in");case 8:v();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.delete("/todo/".concat(t));case 2:v();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.patch("/todos/".concat(t),n);case 2:v();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){v()}),[O,t]),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{className:"title"}),Object(x.jsx)(W,{createTodo:y}),Object(x.jsx)(I.a,{children:Object(x.jsxs)(C.a,{xs:24,md:{span:24,offset:0},children:[Object(x.jsx)(q,{fetchTodos:v,setFilter:g}),Object(x.jsx)(L,{patchTodo:S,removeTodo:_,todos:c.slice(5*(d-1),5*d)}),Object(x.jsx)(M.a,{hideOnSinglePage:!0,size:"small",style:{marginTop:65},pageSize:5,current:d,onChange:function(e){return h(e)},total:c.length})]})})]})}var K=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){a(!!localStorage.getItem("token"))}),[]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(i.a,{children:[Object(x.jsx)(g,{isAuth:n,setIsAuth:a}),Object(x.jsxs)(y.d,{children:[Object(x.jsx)(y.b,{path:"/login",children:Object(x.jsx)(A,{isAuth:n,setIsAuth:a})}),Object(x.jsx)(y.b,{path:"/registration",children:Object(x.jsx)(N,{isAuth:n,setIsAuth:a})}),Object(x.jsx)(y.b,{exact:!0,path:"/",children:Object(x.jsx)(U,{isAuth:n})}),Object(x.jsx)(y.a,{to:"/login"})]})]})})};n(350);c.a.render(Object(x.jsx)(i.a,{children:Object(x.jsx)(K,{})}),document.getElementById("root"))}},[[351,1,2]]]);
//# sourceMappingURL=main.16494ce7.chunk.js.map