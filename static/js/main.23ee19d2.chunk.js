(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{130:function(e,t,n){e.exports={mySort:"MySort_mySort__Vqm3W",sort__btn:"MySort_sort__btn__3wecl"}},184:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(20),a=n.n(c),s=n(25),o=n.n(s),i=n(41),l=n(32),u=(n(184),n(174)),j=n(58),d=n(353),f=n(6),p=function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(d.a,Object(j.a)(Object(j.a)({style:{borderRadius:10,height:35}},e),{},{placeholder:"Buy milk..."}))})},h=function(e){var t=e.createTodo,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],s=c[1];return Object(f.jsx)("div",{children:Object(f.jsx)("form",{style:{alignItems:"center",paddingTop:5,paddingBottom:10},children:Object(f.jsx)(p,{onKeyDown:function(e){"Enter"===e.code&&(e.preventDefault(),""===a.trim()?u.b.error("Form is empty"):(t(a),s("")))},onChange:function(e){return s(e.target.value)},value:a,type:"text"})})})},b=n(59),O=n(352),x=n(129),g=n.n(x),m=g.a.create({baseURL:"http://localhost:2000"}),y=g.a.create({baseURL:"http://localhost:2000"});y.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("token")),e}));var v=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,c,a,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.prev=1,e.next=4,m.post("/user/registration",{email:t,password:n});case 4:if(c=e.sent,(a=c.data).token){e.next=8;break}return e.abrupt("return");case 8:localStorage.setItem("token",a.token),r&&r(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t&&u.b.error("Email already exists");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r,c,a,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.prev=1,e.next=4,m.post("/user/login",{email:t,password:n});case 4:if(c=e.sent,(a=c.data).token){e.next=8;break}return e.abrupt("return");case 8:localStorage.setItem("token",a.token),r&&r(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),u.b.error("Incorrect login or password");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){var t=e.setIsAuth,n=e.isAuth,c=Object(r.useState)(!1),a=Object(l.a)(c,2),s=a[0],u=a[1],j=Object(r.useState)(!1),p=Object(l.a)(j,2),h=p[0],x=p[1],g=Object(r.useState)(),m=Object(l.a)(g,2),y=m[0],w=m[1],S=Object(r.useState)(),T=Object(l.a)(S,2),C=T[0],I=T[1],R=function(){t(!0),u(!1),x(!1)},z=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(y,C,R);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(y,C,R);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("header",{style:{display:"flex",justifyContent:"flex-end"},children:[n?Object(f.jsx)(b.a,{onClick:function(){!function(e){localStorage.removeItem("token"),e(!1)}(t)},type:"primary",style:{marginLeft:10,fontWeight:"bold"},children:"LOGOUT"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{type:"ghost",onClick:function(){return u(!0)},children:"Sign In"}),Object(f.jsx)(b.a,{onClick:function(){return x(!0)},type:"primary",style:{marginLeft:10,fontWeight:"bold"},children:"Sign Up"})]}),Object(f.jsx)(O.a,{title:"Sign In",centered:!0,visible:s,onOk:_,onCancel:function(){return u(!1)},children:Object(f.jsxs)("form",{children:[Object(f.jsxs)("section",{style:{display:"flex"},children:[Object(f.jsx)("p",{style:{marginRight:57},children:"Mail:"}),Object(f.jsx)(d.a,{value:y,onChange:function(e){return w(e.target.value)},style:{height:27},placeholder:"yourmail@gmail.com..."})]}),Object(f.jsxs)("section",{style:{display:"flex"},children:[Object(f.jsx)("p",{style:{marginRight:25},children:"Password:"}),Object(f.jsx)(d.a,{value:C,onChange:function(e){return I(e.target.value)},style:{height:27},placeholder:"steveJobs123...",type:"password"})]})]})}),Object(f.jsxs)(O.a,{title:"Sign Up",centered:!0,visible:h,onOk:z,onCancel:function(){return x(!1)},children:[Object(f.jsx)("p",{style:{textAlign:"center",fontSize:18},children:"Welcome!"}),Object(f.jsxs)("form",{children:[Object(f.jsxs)("section",{style:{display:"flex"},children:[Object(f.jsx)("p",{style:{marginRight:57},children:"Mail:"}),Object(f.jsx)(d.a,{value:y,onChange:function(e){return w(e.target.value)},style:{height:27},placeholder:"yourmail@gmail.com..."})]}),Object(f.jsxs)("section",{style:{display:"flex"},children:[Object(f.jsx)("p",{style:{marginRight:25},children:"Password:"}),Object(f.jsx)(d.a,{value:C,onChange:function(e){return I(e.target.value)},style:{height:27},placeholder:"steveJobs123...",type:"password"})]})]})]})]})},S=n(354),T=n(349),C=n(350),I=n(351),R=n(111),z=n(125),_=n.n(z),D=n(355),A=function(e){var t=e.todo,n=e.removeTodo,c=e.patchTodo,a=Object(r.useState)(!1),s=Object(l.a)(a,2),o=s[0],i=s[1],u=Object(r.useState)(!0),j=Object(l.a)(u,2),p=j[0],h=j[1];return Object(f.jsx)(S.b.Item,{style:{borderBottom:"1px solid #f0f0f042"},children:Object(f.jsxs)(T.a,{justify:"space-between",style:{width:"100%",alignItems:"center",color:"#fff"},children:[Object(f.jsx)(C.a,{style:{cursor:"pointer"},children:Object(f.jsxs)(T.a,{onClick:function(e){e.stopPropagation(),i(!0)},align:"middle",children:[Object(f.jsx)(_.a,{checked:!!t.done,onClick:function(e){e.stopPropagation(),c(t.id,{done:!t.done})},style:{marginRight:10}}),Object(f.jsx)(I.a,{style:{color:"#fff",fontSize:15},children:o?Object(f.jsx)(d.a,{size:"small",autoFocus:!0,onBlur:function(){return i(!1)},onKeyDown:function(e){"Enter"===e.code&&(c(t.id,{title:e.target.value}),i(!1))},defaultValue:t.title}):t.title})]})}),Object(f.jsxs)(C.a,{children:[t.createdAt.slice(11,19),Object(f.jsx)(R.a,{placement:"right",title:"Delete",children:Object(f.jsx)(b.a,{disabled:!p,onClick:function(e){e.stopPropagation(),h(!1),n(t.id)},style:{marginLeft:65,marginRight:18},shape:"circle",size:"small",icon:Object(f.jsx)(D.a,{})})})]})]})})},B=function(e){var t=e.todos,n=e.removeTodo,r=e.selectToDo,c=e.patchTodo;return Object(f.jsx)(S.b,{style:{marginTop:35},size:"large",dataSource:t,renderItem:function(e){return Object(f.jsx)(A,{patchTodo:c,todos:t,todo:e,selectToDo:r,removeTodo:n},e.id)}})},E=n(130),L=n.n(E),N=function(e){var t=e.setFilter,n=function(e){return function(){t((function(t){return Object(j.a)(Object(j.a)({},t),{},{filterType:e})}))}},r=function(e){return function(){t((function(t){return Object(j.a)(Object(j.a)({},t),{},{sortDirection:e})}))}};return Object(f.jsxs)("div",{className:L.a.mySort,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:n(""),children:"All"}),Object(f.jsx)(b.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:n("done"),children:"Done"}),Object(f.jsx)(b.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:n("undone"),children:"In process"})]}),Object(f.jsxs)("div",{className:L.a.sort__btn,children:[Object(f.jsx)("p",{style:{marginRight:23,marginBottom:0,color:"#fff"},children:"Sort by date"}),Object(f.jsx)(b.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:r("asc"),children:Object(f.jsx)("i",{className:"fas fa-chevron-up"})}),Object(f.jsx)(b.a,{size:"small",style:{marginRight:10,color:"#fff"},type:"ghost",shape:"round",onClick:r("desc"),children:Object(f.jsx)("i",{className:"fas fa-chevron-down"})})]})]})},P=n(171);var F=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(l.a)(a,2),j=s[0],d=s[1],p=Object(r.useState)(1),b=Object(l.a)(p,2),O=b[0],x=b[1],g=Object(r.useState)({sortDirection:"asc",filterType:"all"}),m=Object(l.a)(g,2),v=m[0],k=m[1],S=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={order:v.sortDirection},"done"!==v.filterType&&"undone"!==v.filterType||(t.filterBy=v.filterType),e.next=5,y.get("/todos",{params:t});case 5:n=e.sent,c(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c([]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.post("/todo",{title:t,done:!1});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),u.b.error("You need to sign in");case 8:S();case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.delete("/todo/".concat(t));case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.patch("/todos/".concat(t),n);case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){S()}),[v,j]),Object(r.useEffect)((function(){d(!!localStorage.getItem("token"))}),[]),Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(w,{setIsAuth:d,isAuth:j}),Object(f.jsx)("h1",{className:"title",children:"ToDo"}),Object(f.jsx)(h,{createTodo:I}),Object(f.jsx)(T.a,{children:Object(f.jsxs)(C.a,{xs:24,md:{span:24,offset:0},children:[Object(f.jsx)(N,{fetchTodos:S,setFilter:k}),Object(f.jsx)(B,{patchTodo:z,removeTodo:R,todos:n.slice(5*(O-1),5*O)}),Object(f.jsx)(P.a,{hideOnSinglePage:!0,size:"small",style:{marginTop:65},pageSize:5,current:O,onChange:function(e){return x(e)},total:n.length})]})})]})};n(343);a.a.render(Object(f.jsx)(F,{}),document.getElementById("root"))}},[[344,1,2]]]);
//# sourceMappingURL=main.23ee19d2.chunk.js.map